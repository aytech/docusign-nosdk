(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(35)},20:function(e,t,a){},22:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(12),c=a.n(s),l=a(4),i=a(5),o=a(8),u=a(6),m=a(9),d=a(37),f=a(39),p=a(38),h=(a(20),a(22),a(24),function(e){var t,a=e.loading,n=e.disabled;return t=!0===a?r.a.createElement("div",{className:"fa-sm"},r.a.createElement("i",{className:"fas fa-sync fa-spin"}),"Submit"):"Submit",r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block",disabled:!0===n},t)}),b=function(e){var t=e.for,a=e.text;return r.a.createElement("label",{htmlFor:t},a)},E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).defaultUser={name:"",email:""},a.state={authenticated:!1,error:!1,errorMessage:"",loading:!1,subject:"DocuSign Infor - Sample Signature Request",success:!1,successMessage:"",user:a.defaultUser},a.submitForm=function(e){e.preventDefault(),a.validateRecipient(a.signDocument)},a.validateRecipient=function(e){var t=a.state.user;""===t.name||""===t.email?a.setState({error:!0,errorMessage:"Please select recipient"}):a.setState({error:!1,errorMessage:""},e)},a.signDocument=function(){a.setState({loading:!0});var e=a.state,t=e.subject,n=e.user,r=n.email,s=n.name;console.log("Submit: ",t,r,s),fetch("/api/sign",{body:JSON.stringify({email:r,name:s,subject:t}),headers:{"Content-Type":"application/json"},method:"POST",mode:"cors"}).then(function(e){var t=a.state,n=t.error,r=t.errorMessage,s=t.success,c=t.successMessage;200===e.status?(s=!0,c="Document submitted successfully"):(n=!0,r=e.statusText),a.setState({error:n,errorMessage:r,success:s,successMessage:c,loading:!1})})},a.updateSubject=function(e){a.setState({subject:e.target.value})},a.updateRecipient=function(e){var t=a.defaultUser,n=!0,r=!1,s=void 0;try{for(var c,l=a.props.users[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var i=c.value;i.id===e.target.value&&(t={name:"".concat(i.firstName," ").concat(i.lastName),email:i.email})}}catch(o){r=!0,s=o}finally{try{n||null==l.return||l.return()}finally{if(r)throw s}}a.setState({user:t},a.validateRecipient)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.errorMessage,n=e.loading,s=e.subject,c=e.success,l=e.successMessage,i=[r.a.createElement("option",{key:0},"Select recipient")],o=!0,u=!1,m=void 0;try{for(var d,f=this.props.users[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){var p=d.value;i.push(r.a.createElement("option",{key:p.id,value:p.id},p.firstName," ",p.lastName))}}catch(E){u=!0,m=E}finally{try{o||null==f.return||f.return()}finally{if(u)throw m}}return r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement("div",{className:"form-group"},r.a.createElement(b,{for:"recipient",text:"Select recipient"}),r.a.createElement("select",{className:"form-control",onChange:this.updateRecipient},i)),r.a.createElement("div",{className:"form-group"},r.a.createElement(b,{for:"subject",text:"Subject"}),r.a.createElement("textarea",{className:"form-control",rows:"3",id:"subject",placeholder:"Subject",value:s,onChange:this.updateSubject})),!0===t&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},a),!0===c&&r.a.createElement("div",{className:"alert alert-success",role:"alert"},l),r.a.createElement(h,{loading:n,disabled:!0===t||!0===n}))}}]),t}(n.Component),v=(a(26),function(){return r.a.createElement("footer",{className:"footer navbar-inverse navbar-fixed-bottom flex-centered"},r.a.createElement("div",{className:"container flex-centered"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("p",{className:"text-muted"}," @Copyright 2019 Infor a.s.")))))}),g=(a(28),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){if(!this.props.show)return null;var e=this.props,t=e.onClose,a=e.header,n=e.children,s=e.iframe?"modal-body iframe":"modal-body";return r.a.createElement("div",{className:"backdrop"},r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h2",null,a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:t},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:s},n)))}}]),t}(r.a.Component)),y=(a(30),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).users={admin:"8f4c470f-1a52-41ff-a86f-7f5dfa92ce16",gmail:"b3983a70-50f3-4e29-a7e5-4cb4216a6f54",seznam:"6f1c97aa-7acc-4056-910d-e5b66f556c6a"},a.state={authenticated:!1,loading:!0},a.authenticateAdmin=function(){return a.authenticate(a.users.admin)},a.authenticateGmail=function(){return a.authenticate(a.users.gmail)},a.authenticateSeznam=function(){return a.authenticate(a.users.seznam)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.onUserLoad;fetch("/api/auth/authenticated",{method:"GET",mode:"cors"}).then(function(t){var a=200===t.status;if(e.setState({authenticated:a,loading:!1}),a)return t.json()}).then(function(e){void 0!==e&&t(e.userInfo,e.users)}).catch(function(e){console.log("Error: ",e)})}},{key:"authenticate",value:function(e){var t=this;this.setState({loading:!0}),fetch("/api/auth/jwt/"+e).then(function(e){var a=200===e.status;if(t.setState({authenticated:a,loading:!1}),a)return e.json()}).then(function(e){void 0!==e&&t.props.onUserLoad(e.userInfo,e.users)})}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"fa fa-2x inline"},r.a.createElement("i",{className:"fas fa-sync fa-spin"})),t=this.props.onSignDocument;return!0===this.state.loading||this.state.authenticated||(e=r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-primary btn-xs",onClick:this.authenticateAdmin},"Sign as Oleg (Infor - admin)"),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-xs",onClick:this.authenticateGmail},"Sign as Oleg (Gmail - IDM)"),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-xs",onClick:this.authenticateSeznam},"Sign as Oleg (Seznam - IDM)"))),!0!==this.state.loading&&this.state.authenticated&&(e=r.a.createElement("button",{type:"button",className:"btn btn-primary btn-xs",onClick:t},"Sign document")),r.a.createElement("div",{className:"page-header"},r.a.createElement("span",{className:"file-name"},"Resource file - ",r.a.createElement("strong",null,"demo_document.pdf")),e)}}]),t}(n.Component)),S=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.user;return void 0!==e&&null!==e||(e={id:"",firstName:"",lastName:"",email:""}),r.a.createElement("div",{className:"page-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9"},r.a.createElement("embed",{src:"/demo_document.pdf",width:"800",height:"1100px"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("caption",null,"Authenticated as:"),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Name:"),r.a.createElement("td",null,e.firstName,"\xa0",e.lastName)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"Email:"),r.a.createElement("td",null,e.email)),r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},"ID:"),r.a.createElement("td",null,e.id))))))))}}]),t}(n.Component),N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={signModalOpen:!1,user:null,users:null},a.openSignDocumentModal=function(){a.setState({signModalOpen:!0})},a.closeSignDocumentModal=function(){a.setState({signModalOpen:!1})},a.onDocumentSubmit=function(){a.setState({signModalOpen:!1})},a.onUserLoad=function(e,t){a.setState({user:e,users:t})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement(f.a,null,r.a.createElement(p.a,{path:"/",render:function(){return r.a.createElement("div",{className:"container main"},r.a.createElement(y,{onSignDocument:e.openSignDocumentModal,onUserLoad:e.onUserLoad}),r.a.createElement(S,{user:e.state.user}),r.a.createElement(g,{header:"Sign document",show:!0===e.state.signModalOpen,onClose:e.closeSignDocumentModal},r.a.createElement(E,{users:e.state.users,onDocumentSubmit:e.onDocumentSubmit})),r.a.createElement(v,null))},exact:!0}),r.a.createElement(p.a,{path:"/iframe",render:function(){return window.close(),r.a.createElement("h1",null,"Closing")}}),r.a.createElement(p.a,{render:function(){return r.a.createElement("h2",null,"Page not found!")}})))}}]),t}(n.Component);c.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[14,2,1]]]);
//# sourceMappingURL=main.a9ad91d9.chunk.js.map